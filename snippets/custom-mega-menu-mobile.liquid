<div class="mobile-menu-wrapper">
  <!-- Trigger Button -->
  <button class="menu-trigger " id="openMenu">☰</button>

  <!-- Overlay Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <!-- Header -->
    <div class="menu-header">
      <span class="close-icon" id="closeMenu">✕</span>

      <ul class="menu-tabs">
        <li><a href="#" class="menu-tab active" data-tab="men">MEN</a></li>
        <li><a href="#" class="menu-tab" data-tab="women">WOMEN</a></li>
       <li class="menu-tab-right">
  <img 
    src="{{ 'ExceptionalLogo.svg' | asset_url }}" 
    alt="Exceptionals Logo" 
    class="exceptional-logo"
  >
  <a href="#" class="menu-tab" data-tab="exceptional">EXCEPTIONALS</a>
</li>

      </ul>
    </div>

    <!-- CONTENT WRAPPER -->
    <div class="menu-content">
      <div id="menuDataWrapper">

        <!-- ================= MEN DATA ================= -->
        <div class="menu-data" id="data-men">
          <div class="new-arrival">
            <h3>NEW ARRIVAL</h3>
            <div class="arrival-item">
              <span class="n-icon">N</span>
              <a href="/collections/men-billionaires-afternoon">Billionaire's Afternoon</a>
            </div>
          </div>

          <div class="menu-section">
            <h2 class="menu-title">SHOP <span class="arrow">→</span></h2>
            <ul class="submenu">
              <li><a href="/collections/men-all-products">Shop All</a></li>
              <li><a href="/collections/men-t-shirts">T-Shirts</a></li>
              <li><a href="/collections/men-shirts">Shirts</a></li>
              <li><a href="/collections/men-vest">Vest</a></li>
              <li><a href="/collections/men-pants">Pants</a></li>
              <li><a href="/collections/men-denim-jeans">Denim Jeans</a></li>
              <li><a href="/collections/men-denim-shorts">Denim Shorts</a></li>
            </ul>
          </div>

          <div class="menu-section">
            <h2 class="menu-title">DROPS <span class="arrow">→</span></h2>
            <ul class="submenu">
              <li><a href="/collections/men-billionaires-afternoon">Billionaire's Afternoon (SS-25)</a></li>
              <li><a href="/collections/men-rev-it">Rev It (SS25)</a></li>
              <li><a href="/collections/men-crushed-elegance">Crushed Elegance (AW25)</a></li>
              <li><a href="/collections/men-romance-with-nature">Romance With Nature (SS24)</a></li>
            </ul>
           
          </div>
          
        </div>

        <!-- ================= WOMEN DATA ================= -->
        <div class="menu-data" id="data-women" style="display:none;">
          <div class="new-arrival">
            <h3>NEW ARRIVAL</h3>
            <div class="arrival-item">
              <span class="n-icon">N</span>
              <a href="/collections/women-billionaires-afternoon">Billionaire's Afternoon</a>
            </div>
          </div>

          <div class="menu-section">
            <h2 class="menu-title">SHOP <span class="arrow">→</span></h2>
            <ul class="submenu">
              <li><a href="/collections/women-all-products">Shop All</a></li>
              <li><a href="/collections/women-t-shirts">T-Shirts</a></li>
              <li><a href="/collections/women-shirts">Shirts</a></li>
              <li><a href="/collections/women-crop-tops">Crop Tops</a></li>
              <li><a href="/collections/women-vest">Vest</a></li>
              <li><a href="/collections/women-pants">Pants</a></li>
              <li><a href="/collections/women-denim-jeans">Denim Jeans</a></li>
              <li><a href="/collections/women-denim-shorts">Denim Shorts</a></li>
          </ul>
          </div>

          <div class="menu-section">
            <h2 class="menu-title">DROPS <span class="arrow">→</span></h2>
            <ul class="submenu">
              <li><a href="/collections/women-billionaires-afternoon">Billionaire's Afternoon (SS-25)</a></li>
              <li><a href="/collections/women-rev-it">Rev It (SS25)</a></li>
              <li><a href="/collections/women-crushed-elegance">Crushed Elegance (AW25)</a></li>
          </ul>
          </div>
        </div>

        <!-- ================= EXCEPTIONAL DATA ================= -->
        <div class="menu-data" id="data-exceptional" style="display:none;">
          <div class="new-arrival">
            <h3>NEW ARRIVAL</h3>
            <div class="arrival-item">
              <span class="n-icon">N</span>
              <a href="/collections/billionaires-afternoon">Billionaire's Afternoon</a>
            </div>
          </div>

          <div class="menu-section">
            <h2 class="menu-title">SHOP <span class="arrow">→</span></h2>
            <ul class="submenu">
             
          <li><a href="/collections/exceptional-all-products">Shop All</a></li>
          <li><a href="/collections/exceptional-tshirt">T-Shirts</a></li>
          <li><a href="/collections/exceptional-coat">Coat</a></li>
          <li><a href="/collections/exceptional-cargo">Cargo</a></li>
          <li><a href="/collections/exceptional-jacket">Jacket</a></li>
            </ul>
          </div>

          

          
        </div>

      </div>

      <div class="mobile-menu-bottom">
        <a href="/pages/about-us">About Us</a>
        <a href="/pages/contact">Contact Us</a>
      </div>
    </div>
  </div>
</div>

<style>
  .menu-tab-right {
  display: flex;
  align-items: center;
  gap: 6px;
}

.exceptional-logo {
  width: 16px;
  height: 16px;
  display: block;
}

  @media (max-width: 768px) {
  .menu-tab-right {
    margin-left: auto;
    padding-right: 20px;
  }
}



.mobile-menu-bottom {
  position: relative;
  width: 100%;
  display: flex;
  background: #fff;
  border-top: 1px solid #000;
  flex-shrink: 0;
}

.mobile-menu-bottom a {
  flex: 1;
  text-align: center;
  padding: 10px 0;
  text-decoration: none;
  color: #000;
  font-size: 12px;
  font-weight: 500;
}

.mobile-menu-bottom a:first-child {
  border-right: 1px solid #000;
}


.menu-content {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

#menuDataWrapper {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

.menu-data {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height: 0;
}

.new-arrival h3 {
  color:white;
}
.arrival-item a {
  color:white;
}
.mobile-menu-wrapper { display: none; }

@media (max-width: 768px) {
  .mobile-menu-wrapper { display: block; }

  .menu-trigger {
    position: fixed; top: 10px; left: 10px;
    font-size: 26px; background: none; border: none;
    z-index: 1000; cursor: pointer;
    color: black;
  }

  .mobile-menu {
    position: fixed; top: 0; left: -100%;
    width: 100%; height: 100%;
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.95);
    transition: left .4s ease;
    z-index: 999;
    display: flex; 
    flex-direction: column;
    overflow: hidden;
  }

  .mobile-menu.active { left: 0; }

  /* HEADER */
  .menu-header {
    border-bottom: 1px solid rgba(0,0,0,0.1);
    margin-top: 5px;
    padding-bottom: 5px;
    flex-shrink: 0;
  }
  .close-icon {
    font-size: 24px; 
    padding: 10px 15px; 
    cursor: pointer;
    display: inline-block;
  }

  .menu-tabs {
    display: flex; 
    justify-content: center;
    list-style: none; 
    gap: 12px; 
    padding: 0 10px;
    flex-wrap: wrap;
  }
  .menu-tab { 
    color: #000; 
    text-decoration: none;
    font-size: 12px; 
    font-weight: 500;
  }
  .menu-tab.active { 
    text-decoration: underline; 
    font-weight: 700; 
  }

  /* NEW ARRIVAL */
  .new-arrival {
    background: #000; 
    color: #fff;
    padding: 8px 12px; 
    margin-top: 5px;
  }

  .arrival-item { 
    display: flex; 
    gap: 6px; 
    margin-top: 5px; 
  }
  .n-icon {
    background: #fff; 
    color: #000;
    padding: 2px 5px; 
    font-weight: bold; 
    border-radius: 3px;
    font-size: 11px;
  }

  .menu-section { 
    padding: 10px 12px; 
  }
  .menu-title {
    font-size: 16px; 
    font-weight: 700;
    display: flex; 
    justify-content: space-between; 
    cursor: pointer;
    margin: 3px 0;
  }

  .submenu { 
    display: none; 
    list-style: none; 
    padding-left: 8px; 
    margin-top: 5px; 
  }
  .submenu li { 
    margin: 4px 0; 
  }
  .submenu a { 
    font-size: 13px; 
    color: #000; 
    text-decoration: none; 
  }
  .submenu a.active { 
    text-decoration: underline; 
    font-weight: 600; 
  }

  .menu-footer {
    margin-top: auto; padding: 25px 20px; display: flex; flex-direction: column; gap: 15px;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // MENU OPEN/CLOSE
  const openMenu = document.getElementById("openMenu");
  const closeMenu = document.getElementById("closeMenu");
  const mobileMenu = document.getElementById("mobileMenu");

  openMenu.addEventListener("click", () => {
    mobileMenu.classList.add("active");
    openMenu.style.display = "none";
    document.body.style.overflow = "hidden";

    // Open first submenu of active tab on menu open
    const activeTab = document.querySelector(".menu-tab.active");
    if (activeTab) {
      const tabName = activeTab.dataset.tab;
      const activeData = document.getElementById("data-" + tabName);
      const firstSection = activeData.querySelector(".menu-section");
      if (firstSection) {
        const firstSubmenu = firstSection.querySelector(".submenu");
        const firstArrow = firstSection.querySelector(".arrow");
        if (firstSubmenu && firstArrow) {
          firstSubmenu.style.display = "block";
          firstArrow.textContent = "↓";
        }
      }
    }
  });

  closeMenu.addEventListener("click", () => {
    mobileMenu.classList.remove("active");
    openMenu.style.display = "block";
    document.body.style.overflow = "";
  });

  // TAB SWITCH LOGIC
  document.querySelectorAll(".menu-tab").forEach(tab => {
    tab.addEventListener("click", function(e) {
      e.preventDefault();

      document.querySelectorAll(".menu-tab").forEach(t => t.classList.remove("active"));
      this.classList.add("active");

      const tabName = this.dataset.tab;

      document.querySelectorAll(".menu-data").forEach(data => data.style.display = "none");
      const targetData = document.getElementById("data-" + tabName);
      targetData.style.display = "block";

      // Open first submenu (Shop All) automatically
      const firstSection = targetData.querySelector(".menu-section");
      if (firstSection) {
        const firstSubmenu = firstSection.querySelector(".submenu");
        const firstArrow = firstSection.querySelector(".arrow");
        if (firstSubmenu && firstArrow) {
          firstSubmenu.style.display = "block";
          firstArrow.textContent = "↓";
        }
      }
    });
  });

  // DROPDOWN (SHOP + DROPS)
  document.querySelectorAll(".menu-title").forEach(title => {
    title.addEventListener("click", function() {
      let submenu = this.nextElementSibling;
      let arrow = this.querySelector(".arrow");

      const isOpen = submenu.style.display === "block";
      submenu.style.display = isOpen ? "none" : "block";

      arrow.textContent = isOpen ? "→" : "↓";
    });
  });

  // Track active link based on current URL
  const currentPath = window.location.pathname;
  document.querySelectorAll(".submenu a").forEach(link => {
    if (link.getAttribute("href") === currentPath) {
      link.classList.add("active");
      
      // Find which tab this link belongs to
      const parentData = link.closest(".menu-data");
      if (parentData) {
        const dataId = parentData.id; // e.g., "data-women"
        const tabName = dataId.replace("data-", ""); // e.g., "women"
        
        // Switch to correct tab
        document.querySelectorAll(".menu-tab").forEach(t => t.classList.remove("active"));
        const correctTab = document.querySelector(`.menu-tab[data-tab="${tabName}"]`);
        if (correctTab) {
          correctTab.classList.add("active");
        }
        
        // Show correct data section
        document.querySelectorAll(".menu-data").forEach(data => data.style.display = "none");
        parentData.style.display = "block";
      }
      
      // Open the parent submenu of active link
      const parentSubmenu = link.closest(".submenu");
      const parentSection = link.closest(".menu-section");
      if (parentSubmenu && parentSection) {
        parentSubmenu.style.display = "block";
        const arrow = parentSection.querySelector(".arrow");
        if (arrow) arrow.textContent = "↓";
      }
    }
  });

});
</script>